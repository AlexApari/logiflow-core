<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LogiFlow - Proveedores</title>
<link
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css" th:href="@{/css/Style.css}">
</head>
<body>
	<div class="header" th:replace="fragmentos/Header :: header"></div>
	<div class="container">
		<div th:replace="fragmentos/Sidebar :: sidebar"></div>
		<main class="main-content">
			<!-- Proveedores Section -->
			<section id="proveedores" class="form-section active">
				<div class="page-header">
					<h2 class="page-title">Gestión de Proveedores</h2>
					<p class="page-subtitle">Administrar proveedores y
						distribuidores</p>
				</div>
				<div class="content-card">
					<h3>Nuevo Proveedor</h3>
					<form id="supplierForm"
						th:action="@{/operaciones/proveedores/registrar}"
						th:object="${proveedorForm}" method="post">
						<input type="hidden" th:field="*{Id}" />
						
						<div class="form-row">
							<div class="form-group">
								<label for="rucProveedor">RUC</label> <input type="text"
									th:field="*{ruc}" required>
									
							</div>
							<div class="form-group">
								<label for="razonSocial">Razón Social</label> <input type="text"
									th:field="*{razonSocial}" required>
							</div>
							<div class="form-group">
								<label for="nombreComercial">Nombre Comercial</label> <input
									type="text" th:field="*{nombreComercial}" required>
							</div>
						</div>
						<div class="form-group">
							<label for="direccionProveedor">Dirección</label> <input
								type="text" th:field="*{direccion}" required>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="ciudadProveedor">Ciudad</label> <input type="text"
									id="ciudadProveedor" th:field="*{ciudad}" required>
							</div>
							<div class="form-group">
								<label for="paisProveedor">País</label> <input type="text"
									id="paisProveedor" th:field="*{pais}" required>
							</div>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="telefonoProveedor">Teléfono</label> <input
									type="tel" th:field="*{telefono}" required>
							</div>
							<div class="form-group">
								<label for="celularProveedor">Celular</label> <input type="tel"
									th:field="*{telefonoAlternativo}">
							</div>
							<div class="form-group">
								<label for="emailProveedor">Email</label> <input type="email"
									id="emailProveedor" th:field="*{email}" required>
							</div>
							<div class="form-group">
								<label for="emailAlternativo">Email Alternativo</label> <input
									type="email" id="emailAlternativo"
									th:field="*{emailAlternativo}">
							</div>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="contacto">Persona de Contacto</label> <input
									type="text" id="contacto" th:field="*{personaContacto}">
							</div>
							<div class="form-group">
								<label for="cargoContacto">Cargo del Contacto</label> <input
									type="tel" id="cargoContacto" th:field="*{cargoContacto}">
							</div>
							<div class="form-group">
								<label for="condicionPago">Condición de Pago</label> <select
									id="condicionPago" th:field="*{condicionPago}">
									<option value="CONTADO">Contado</option>
									<option value="CREDITO_15">Crédito 15 días</option>
									<option value="CREDITO_30">Crédito 30 días</option>
									<option value="CREDITO_60">Crédito 60 días</option>
									<option value="CREDITO_90">Crédito 90 días</option>
								</select>
							</div>
							<div class="form-group">
								<label for="descuentoProveedor">Calificacion</label> <select
									id="calificacion" th:field="*{calificacion}">
									<option value="EXCELENTE">Excelente</option>
									<option value="BUENO">Bueno</option>
									<option value="REGULAR">Regular</option>
									<option value="MALO">Malo</option>
								</select>
							</div>
						</div>
						<div class="form-group">
							<label for="notasProveedor">Notas Adicionales</label>
							<textarea id="notasProveedor" th:field="*{notas}" rows="3"></textarea>
						</div>
						<div class="form-row">
							<div class="form-group">
								<label for="activoProveedor">Activo</label> <input
									type="checkbox" id="activoProveedor" th:field="*{activo}" />
							</div>
							<div class="form-group">
								<label for="limiteCredito">Límite de Crédito</label> <input
									type="number" id="limiteCredito" th:field="*{limiteCredito}"
									step="0.01" />
							</div>
						</div>

						<div class="form-group">
							<button type="submit" class="btn btn-primary" th:text="${proveedorForm.Id !=null} ? 'Agregar Proveedor' : 'Guardar Proveedor'">
								<i class="fas fa-save"></i> Guardar Proveedor
							</button>
							<button type="reset" class="btn btn-secondary">
								<i class="fas fa-undo"></i> Limpiar
							</button>
							
						</div>
					</form>
				</div>
			</section>
			<section id="lista-proveedores" class="list-section">
				<div class="page-header">
					<h2 class="page-title">Lista de Proveedores</h2>
					<p class="page-subtitle">Ver y administrar proveedores
						existentes</p>
				</div>
				<div class="content-card">
					<table class="data-table">
						<thead>
							<tr>
								<th>RUC</th>
								<th>Razón Social</th>
								<th>Nombre Comercial</th>
								<th>Ciudad</th>
								<th>País</th>
								<th>Teléfono</th>
								<th>Email</th>
								<th>Activo</th>
								<th>Acciones</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="proveedor : ${proveedores}">
								<td th:text="${proveedor.ruc}">RUC</td>
								<td th:text="${proveedor.razonSocial}">Razón Social</td>
								<td th:text="${proveedor.nombreComercial}">Nombre Comercial</td>
								<td th:text="${proveedor.ciudad}">Ciudad</td>
								<td th:text="${proveedor.pais}">País</td>
								<td th:text="${proveedor.telefono}">Teléfono</td>
								<td th:text="${proveedor.email}">Email</td>
								<td th:text="${proveedor.activo} ? 'Sí' : 'No'">Activo</td>
								<td>
									<div class="action-buttons">
										<input type="hidden" name="ruc" th:value="${proveedor.ruc}" />
										<a
											th:href="@{'/operaciones/proveedores/editar/' + ${proveedor.ruc}}"
											class="custom-btn primary btn-sm">
											<button type="submit" class="custom-btn primary btn-sm">Editar</button>
										</a>
										<button type="submit" class="custom-btn danger btn-sm">Eliminar</button>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</section>
		</main>
	</div>
	<script>
		function confirmarEliminacion(id, nombre) {
			if (confirm('¿Está seguro que desea eliminar el producto "'
					+ nombre + '"? Esta acción no se puede deshacer.')) {
				document.getElementById('codigoEliminar').value = id;
				document.getElementById('formEliminar').submit();
			}
		}
	</script>
</body>
</html>