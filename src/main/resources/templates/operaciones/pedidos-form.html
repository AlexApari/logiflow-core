<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/Style.css}">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

</head>
<body>
<div class="header" th:replace="fragmentos/Header :: header"></div>
	<div class="container">
		<div th:replace="fragmentos/Sidebar :: sidebar"></div>
		<main class="main-content">
			<!-- Pedidos Section -->
			<section id="pedidos" class="form-section active">
				<div class="page-header">
					<h2 class="page-title">Gestión de Pedidos</h2>
					<p class="page-subtitle">Crear y administrar pedidos</p>
				</div>
				<div class="content-card">
					<h3>Nuevo Pedido</h3>
					<form th:action="@{/operaciones/pedidos/registrar}"
						th:object="${pedidoRequestDTO}" method="post" id="orderForm">

						<!-- Información general del pedido -->
						<div class="form-row">
							<div class="form-group">
								<label>Número de Pedido</label> <input type="text"
									th:field="*{numeroPedido}" />
							</div>
							<div class="form-group">
								<label>Fecha de Pedido</label> <input type="date"
									th:field="*{fechaPedido}" required />
							</div>
							<div class="form-group">
								<label>Fecha de Entrega Estimada</label> <input type="date"
									th:field="*{fechaEntregaEstimada}" required />
							</div>
						</div>

						<div class="form-group">
							<label>Cliente</label> <select th:field="*{clienteId}" required>
								<option value="">Seleccionar cliente</option>
								<option th:each="c : ${clientes}" th:value="${c.id}"
									th:text="${c.nombres} + ' ' + ${c.apellidos}"></option>
							</select>
						</div>

						<div class="form-group">
							<label>Dirección de Entrega</label>
							<textarea th:field="*{direccionEntrega}" rows="2" required></textarea>
						</div>
						<div class="form-group">
							<label>Referencia Dirección</label> <input type="text"
								th:field="*{referenciaDireccion}" />
						</div>
						<div class="form-group">
							<label>Ciudad</label> <input type="text"
								th:field="*{ciudadEntrega}" required />
						</div>

						<div class="form-row">
							<div class="form-group">
								<label>Estado</label> <select th:field="*{estado}">
									<option value="PENDIENTE">Pendiente</option>
									<option value="PROCESANDO">Procesando</option>
									<option value="ENVIADO">Enviado</option>
									<option value="ENTREGADO">Entregado</option>
								</select>
							</div>
							<div class="form-group">
								<label>Prioridad</label> <select th:field="*{prioridad}">
									<option value="NORMAL">Normal</option>
									<option value="ALTA">Alta</option>
									<option value="URGENTE">Urgente</option>
								</select>
							</div>
							<div class="form-group">
								<label>Método de Pago</label> <select th:field="*{metodoPago}">
									<option value="EFECTIVO">Efectivo</option>
									<option value="TARJETA">Tarjeta</option>
									<option value="TRANSFERENCIA">Transferencia</option>
								</select>
							</div>
						</div>

						<div class="form-group">
							<label>Observaciones</label>
							<textarea th:field="*{observaciones}" rows="3"></textarea>
						</div>

						<!-- Lista dinámica de productos -->
						<div class="form-group">
							<div th:each="detalle, iterStat : *{detalles}">
								<label>Producto:</label> <select
									th:field="*{detalles[__${iterStat.index}__].productoId}">
									<option th:each="p : ${productos}" th:value="${p.id}"
										th:text="${p.nombre}">Producto</option>
								</select> <label>Cantidad:</label> <input type="number"
									th:field="*{detalles[__${iterStat.index}__].cantidad}" />
							</div>
		<!--  	<table>
								<thead>
									<tr>
										<th>Código</th>
										<th>Cantidad</th>
										<th>Descuento %</th>
										<th>Notas</th>
										<th>Acción</th>
									</tr>
								</thead>
								<tbody id="productosBody">
									<tr th:each="detalle, iterStat : *{detalles}">
										<td><input type="text" th:field="*{detalles[__${iterStat.index}__].productoId}" /></td>
										<td><input type="number" th:field="*{detalles[__${iterStat.index}__].cantidad}"
											min="1" /></td>
										<td><input type="text"
											th:field="*{detalles[__${iterStat.index}__].descuentoPorcentaje}" /></td>
										<td><input type="text" th:field="*{detalles[__${iterStat.index}__].notas}" /></td>
										<td><button type="button" class="removeRow">Eliminar</button></td>
									</tr>
								</tbody>
							</table>
							<button type="button" id="addProducto">Agregar Producto</button>
						</div>-->

						<div class="form-group">
							<button type="submit" class="btn btn-primary">Crear
								Pedido</button>
							<button type="reset" class="btn btn-secondary">Limpiar</button>
						</div>
					</form>



				</div>
			</section>
		</main>
	</div>
</body>
</html>